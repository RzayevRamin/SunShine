import React, { useState } from "react";
import "./PizzaCarousel.css";
// eslint-disable-next-line no-unused-vars
import { AnimatePresence, motion } from "framer-motion";

function PizzaCarousel({
  pizzas,
  currentPizzIndex,
  setCurrentPizzIndex,
}) {
  const [isHover, setIsHover] = useState(false);

  const [direction, setDirection] = useState(0);

  const transitionConfig = { duration: 0.8, ease: "easeInOut" };


  const variants = {
  enter: (direction) => {
    if (direction > 0) {
      return {
        x: 650,
        y: 0,
        rotate: 0,
        opacity: 1,
      };
    } else {
      return {
        x: -1500,
        y: 1000,
        rotate: -360,
        opacity: 1,
      };
    }
  },
  center: {
    x: 0,
    y: 0,
    rotate: 0,
    opacity: 1,
    transition: { duration: 1 },
  },
  exit: (direction) => {
    if (direction > 0) {
      return {
        x: -1500,
        y: 1000,
        rotate: -360,
        opacity: 1,
        transition: { duration: 1 },
      };
    } else {
      return {
        x: 650,
        y: 0,
        rotate: 0,
        opacity: 1,
        transition: { duration: 1 },
      };
    }
  },
};


  const handleNext = () => {
  setDirection(1);
  setCurrentPizzIndex((prev) => (prev + 1) % pizzas.length);
};

const handlePrev = () => {
  setDirection(-1);
  setCurrentPizzIndex((prev) =>
    prev === 0 ? pizzas.length - 1 : prev - 1
  );
};

  return (
    <div className="pizzaCarouselContainer">
      <div className="pizzaTextAndButtonBox">
        <h2 className="pizzaHeading">Hot & Fresh delicious pizza</h2>
        <p className="pizzaText">
          Order your favorite pizza in just a few taps and get it delivered hot
          and fresh straight to your door.
        </p>
        <motion.button
          className="pizzaButton"
          key={pizzas[currentPizzIndex].name + "-btn"}
          style={{
            backgroundColor: isHover
              ? "transparent"
              : pizzas[currentPizzIndex].pizzBgColor,
            color: isHover ? pizzas[currentPizzIndex].pizzBgColor : "white",
            border: isHover
              ? `1px solid ${pizzas[currentPizzIndex].pizzBgColor}`
              : "none",
          }}
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          exit={{ opacity: 0 }}
          transition={transitionConfig}
          onMouseEnter={() => setIsHover(true)}
          onMouseLeave={() => setIsHover(false)}
        >
          Order now
        </motion.button>
      </div>
      <motion.div
        className="pizzaDecoratorDiv"
        animate={{ backgroundColor: pizzas[currentPizzIndex].pizzBgColor }}
        transition={transitionConfig}
      >
        <div className="pizzaInfoBox">
          <AnimatePresence mode="sync">
            <motion.div
              key={pizzas[currentPizzIndex].name + pizzas[currentPizzIndex].ingredients}
              initial={{ opacity: 0, x: -500, }}
              animate={{ opacity: 1, x: 0, }}
              exit={{ opacity: 0, x: -500, }}
              transition={transitionConfig}
              className="pizzaInfoText"
            >
              <div className="pizzaNameAndPrice">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="36"
                  height="36"
                  viewBox="0 0 36 36"
                  fill="none"
                >
                  <path
                    d="M5.69247 13.2919C5.69247 13.2919 4.15122 14.2622 3.97403 15.2297C3.79685 16.2 4.15122 17.3447 4.63497 18.0928C5.11872 18.8409 5.69247 19.4597 6.39841 19.7241C7.10435 19.9884 7.72028 19.9434 7.72028 19.9434C7.72028 19.9434 9.35154 21.7941 12.2568 24.3056C15.1622 26.8172 18.8662 29.8125 23.0512 32.1469C27.2362 34.4812 28.7353 35.055 29.88 35.055C31.0247 35.055 30.9825 33.3366 30.8503 32.8078C30.7181 32.2791 23.3606 24.0862 23.3606 24.0862L5.69247 13.2919Z"
                    fill="#FF8E00"
                  />
                  <path
                    d="M8.77782 17.5669L7.67532 16.3772C7.67532 16.3772 6.53063 14.2172 5.47313 14.2172C4.41563 14.2172 3.97407 15.2297 3.97407 15.2297C3.97407 15.2297 3.84188 14.1272 5.16376 12.015C6.48563 9.90281 8.15907 8.22656 9.65813 7.16906C11.1572 6.11156 13.005 4.87688 14.2397 4.17375C15.4744 3.47063 18.1603 2.5875 19.7044 2.05875C21.2456 1.53 24.5953 0.869063 26.1366 1.17844C27.6778 1.48781 28.3388 2.54531 28.3388 3.645C28.3388 4.74469 28.0744 5.49563 27.855 5.715C27.6356 5.93438 26.1816 7.16906 26.1816 7.16906L8.77782 17.5669Z"
                    fill="#F5B03E"
                  />
                  <path
                    d="M11.8687 12.9234L9.13779 14.6869L7.9931 16.9341C7.9931 16.9341 8.21248 17.6822 8.56685 18.0788C8.91842 18.4753 11.8687 21.3019 13.9809 23.1075C15.629 24.5166 19.1419 27.5063 19.1419 27.5063C19.1419 27.5063 19.2853 29.0081 19.4512 30.0628C19.5834 30.9009 19.5919 32.2988 20.475 32.2594C21.5887 32.2088 20.9475 29.9531 21.8306 29.9756C23.594 30.0206 21.8447 34.7906 23.7403 34.7653C25.2506 34.7456 24.2915 32.1384 25.0481 31.6941C25.4587 31.4522 26.2744 32.4788 27.6047 33.0609C29.2472 33.7781 30.2484 34.3209 30.7772 34.0734C31.8937 33.5503 29.5397 21.3525 29.2753 19.2825C29.0109 17.2125 27.6947 6.58125 27.6047 6.22969C27.5147 5.87813 25.709 5.83313 25.709 5.83313L22.9331 6.80344L18.9675 7.33219L14.2987 10.1081L11.8687 12.9234Z"
                    fill="#FFCC8A"
                  />
                  <path
                    d="M11.1797 12.4819C10.3134 12.9713 9.19686 13.2441 8.25468 14.7966C7.46999 16.0903 7.26186 17.415 7.82155 17.5163C8.38124 17.6175 8.80593 15.6657 9.55124 14.9232C10.7466 13.7278 11.7141 13.6013 12.4003 12.9657C13.0866 12.33 13.8375 10.6032 16.6978 9.07596C20.0306 7.29565 22.0219 7.76534 22.8009 7.47284C23.8191 7.09034 24.0947 6.46596 25.3687 6.20159C26.7159 5.92315 27.6525 6.46034 27.6525 6.46034C27.6525 6.46034 27.9591 5.74878 27.5512 5.4169C27.1434 5.08503 26.3925 4.82628 25.1381 5.08221C23.7656 5.36065 22.7475 6.27753 22.4691 6.30284C22.1906 6.32815 19.3416 6.17628 15.9581 8.10846C12.5747 10.0407 11.9419 12.0488 11.1797 12.4819Z"
                    fill="#CB6C22"
                  />
                  <path
                    d="M15.0694 15.5587L10.5187 16.5516C10.5187 16.5516 10.4484 17.415 10.4934 17.6709C10.6453 18.5344 11.79 19.9097 12.4762 20.1375C13.1625 20.3653 14.5603 20.3906 15.0187 20.1881C15.4772 19.9856 16.8497 18.9928 17.0269 18.4584C17.2041 17.9241 17.1562 15.6881 16.8019 15.3309C16.4475 14.9766 15.0694 15.5587 15.0694 15.5587Z"
                    fill="#DB0D27"
                  />
                  <path
                    d="M11.8659 14.1356C11.3794 14.5125 10.4428 15.7894 10.5188 16.7034C10.5947 17.6203 12.1725 19.2206 12.6028 19.3725C13.0331 19.5244 14.4338 19.5497 14.7909 19.4484C15.1481 19.3472 16.5206 18.3291 16.7231 17.9747C16.9256 17.6175 17.1056 15.6347 16.7738 15.2803C16.4419 14.9259 15.4519 13.8825 14.6644 13.6519C13.8741 13.4241 12.3244 13.7784 11.8659 14.1356Z"
                    fill="#ED6D30"
                  />
                  <path
                    d="M23.5125 18.4078C23.5125 18.4078 19.485 18.1181 19.4344 18.3713C19.3838 18.6244 19.2909 19.6031 19.5469 20.3906C19.7269 20.9503 20.1572 21.9178 21.4791 22.4747C22.8009 23.0316 24.0722 22.4241 24.4041 22.1681C25.0256 21.69 25.4222 21.0994 25.5234 20.745C25.6247 20.3906 23.5125 18.4078 23.5125 18.4078Z"
                    fill="#DB0D27"
                  />
                  <path
                    d="M21.555 16.2956C20.9334 16.5206 19.4456 17.4403 19.4175 18.4584C19.3922 19.4765 20.1291 20.7225 20.5116 21.0009C20.8941 21.2793 22.1653 22.019 23.1047 21.9684C24.0469 21.9178 25.3434 21.1556 25.5206 20.7478C25.6978 20.34 25.7738 19.1447 25.6978 18.5343C25.6219 17.924 24.3 16.5515 23.6391 16.3462C22.9781 16.1437 22.1147 16.0931 21.555 16.2956Z"
                    fill="#ED6D30"
                  />
                  <path
                    d="M21.4031 25.8075C21.4031 25.8075 17.7159 24.7894 17.6653 24.8653C17.6147 24.9413 17.1056 25.5769 17.2322 25.8834C17.3587 26.19 18.6553 27.2306 19.1897 27.6891C19.7241 28.1475 21.3384 29.0953 21.5297 29.0616C21.9881 28.9856 22.3425 28.2488 22.3425 28.2488L21.4031 25.8075Z"
                    fill="#DB0D27"
                  />
                  <path
                    d="M21.7322 24.255C20.8322 23.594 19.5187 23.6447 18.8072 23.9765C18.0956 24.3084 17.6625 24.7387 17.5866 25.0706C17.5106 25.4025 18.0984 26.0409 18.3291 26.2181C18.5569 26.3953 19.2487 26.9184 19.2487 26.9184C19.2487 26.9184 20.2753 27.7228 20.655 28.0153C21.1837 28.4231 21.8475 28.6537 22.0247 28.679C22.2019 28.7043 23.0287 27.6356 22.8769 26.2097C22.7981 25.4812 22.4887 24.8118 21.7322 24.255Z"
                    fill="#ED6D30"
                  />
                  <path
                    d="M28.1419 22.2216L26.7694 22.171C26.7694 22.171 26.2097 23.2144 26.5922 24.3844C26.9044 25.3406 27.5597 25.9116 28.651 26.2153C29.745 26.5219 30.3553 26.4122 30.3553 26.4122L30.3722 25.6444L28.1419 22.2216Z"
                    fill="#DB0D27"
                  />
                  <path
                    d="M29.4638 20.4666C29.4638 20.4666 27.7706 20.2669 26.8959 21.8391C26.2266 23.0456 26.6934 24.0525 27.2278 24.6375C27.7622 25.2225 28.575 25.605 29.1853 25.6556C29.7956 25.7063 30.3863 25.6584 30.3863 25.6584C30.3863 25.6584 30.15 24.0975 29.9194 22.7925C29.7788 22.0106 29.4638 20.4666 29.4638 20.4666Z"
                    fill="#ED6D30"
                  />
                  <path
                    d="M24.5306 9.45563C24.5306 9.45563 21.2512 9.55688 21.0459 9.88875C20.8406 10.2206 20.8434 11.6944 20.9447 12.2794C21.0459 12.8644 21.9375 14.2875 23.7178 14.3128C25.4981 14.3381 26.1253 13.8938 26.8172 12.5494C27.5091 11.205 26.7891 9.70032 26.7891 9.70032L24.5306 9.45563Z"
                    fill="#DB0D27"
                  />
                  <path
                    d="M24.5559 7.95372C23.8444 7.81591 22.8516 8.10559 22.3678 8.43747C21.8841 8.76934 21.0966 9.45559 21.0459 9.96466C20.9953 10.4737 21.4537 11.9475 21.6309 12.2287C21.8081 12.5072 22.545 13.2637 22.7756 13.3734C23.31 13.6265 24.7837 13.5 25.2169 13.3481C25.65 13.1962 26.8453 12.2287 26.9719 11.7197C27.0984 11.2106 27.2503 10.3472 26.6653 9.30372C26.0803 8.26028 25.2169 8.08309 24.5559 7.95372Z"
                    fill="#ED6D30"
                  />
                  <path
                    d="M29.1881 29.2978L26.2603 29.1713C26.2603 29.1713 25.8666 29.9616 25.9847 30.6535C26.0803 31.2272 26.5556 32.0091 27.4078 32.3381C27.8916 32.5238 29.1572 32.4028 29.4666 32.1919C30.0909 31.7644 30.2906 30.9881 30.2709 30.5888C30.2625 30.3806 29.1881 29.2978 29.1881 29.2978Z"
                    fill="#DB0D27"
                  />
                  <path
                    d="M28.5497 28.0547C27.7903 27.9393 26.9156 28.35 26.5387 28.7409C26.1618 29.1319 26.0859 29.6212 26.2293 30.2118C26.4909 31.2918 27.1828 31.5984 27.5034 31.7644C27.9787 32.009 29.2837 31.9612 29.6943 31.649C30.1022 31.3397 30.4115 30.8109 30.3159 29.9981C30.2175 29.1825 29.8575 28.2515 28.5497 28.0547Z"
                    fill="#ED6D30"
                  />
                  <path
                    d="M10.125 8.7272C10.1503 9.3347 11.2134 9.23064 11.6325 9.18845C11.9672 9.1547 12.8053 9.08439 12.8053 8.53876C12.8053 7.99314 12.074 7.99595 11.5284 8.01564C11.0025 8.03533 10.1025 8.24626 10.125 8.7272ZM15.8372 5.1497C15.8372 5.54908 16.2759 5.58845 16.5487 5.61095C16.8215 5.63064 17.1759 5.52658 17.1984 5.21439C17.2181 4.89939 16.9481 4.71095 16.5487 4.69126C16.1297 4.66595 15.8372 4.8122 15.8372 5.1497ZM18.4528 6.11158C18.855 6.54751 19.4569 5.96533 19.6678 5.69251C19.8759 5.4197 19.9181 5.00064 19.6875 4.79251C19.4569 4.58439 19.0181 4.8122 18.7256 5.08501C18.4331 5.35783 18.2025 5.83876 18.4528 6.11158ZM22.995 3.89251C23.4844 4.44658 24.2915 3.51564 24.6262 3.20064C24.9609 2.88564 25.2337 2.44689 24.9187 2.09251C24.6037 1.73814 23.8922 2.23876 23.6222 2.55376C23.3494 2.86595 22.68 3.53814 22.995 3.89251ZM7.57123 13.2891C8.04654 13.4016 8.20123 12.8391 8.2828 12.4088C8.36717 11.97 8.36717 11.551 8.00998 11.4891C7.60498 11.4188 7.38279 11.8238 7.31811 12.2203C7.26467 12.5775 7.13248 13.185 7.57123 13.2891Z"
                    fill="#FCC12B"
                  />
                </svg>
                <h2 className="pizzaName">{pizzas[currentPizzIndex].name}</h2>
              </div>
              <p className="pizzaIngredients">
                {pizzas[currentPizzIndex].ingredients}
              </p>
            </motion.div>
          </AnimatePresence>
        </div>
        <div className="pizzaImgBox">
          <AnimatePresence custom={direction} mode="sync">
            <motion.img
              key={pizzas[currentPizzIndex].pic}
              src={pizzas[currentPizzIndex].pic}
              alt={pizzas[currentPizzIndex].name}
              custom={direction}
              variants={variants}
              initial="enter"
              animate="center"
              exit="exit"
              className="pizzasPicImg"
            />
          </AnimatePresence>
        </div>
      </motion.div>
      <div className="pizzaCarouselButtonBox">
        <button className="pizzaCarouselButton" onClick={handlePrev}>
          <motion.svg
            xmlns="http://www.w3.org/2000/svg"
            width="40"
            height="40"
            viewBox="0 0 40 40"
            fill="none"
          >
            <path
              d="M19.5833 9.99999C19.5841 10.1642 19.5521 10.327 19.4891 10.4786C19.4261 10.6303 19.3335 10.7679 19.2166 10.8833L10.1 20L19.2166 29.1167C19.4374 29.3536 19.5577 29.667 19.5519 29.9909C19.5462 30.3147 19.415 30.6237 19.186 30.8527C18.957 31.0817 18.648 31.2129 18.3242 31.2186C18.0003 31.2243 17.6869 31.1041 17.45 30.8833L7.44998 20.8833C7.21589 20.6489 7.08441 20.3312 7.08441 20C7.08441 19.6687 7.21589 19.351 7.44998 19.1167L17.45 9.11666C17.6844 8.88257 18.0021 8.75109 18.3333 8.75109C18.6646 8.75109 18.9823 8.88257 19.2166 9.11666C19.3335 9.23206 19.4261 9.36965 19.4891 9.52134C19.5521 9.67302 19.5841 9.83576 19.5833 9.99999Z"
              fill={pizzas[currentPizzIndex].svgColor || "currentColor"}
            />
            <path
              d="M32.9166 20C32.9123 20.3302 32.7792 20.6456 32.5458 20.8791C32.3123 21.1126 31.9968 21.2457 31.6666 21.25L8.33331 21.25C8.00179 21.25 7.68385 21.1183 7.44943 20.8839C7.21501 20.6495 7.08331 20.3315 7.08331 20C7.08331 19.6685 7.21501 19.3505 7.44943 19.1161C7.68385 18.8817 8.00179 18.75 8.33331 18.75L31.6666 18.75C31.9968 18.7543 32.3123 18.8874 32.5458 19.1209C32.7792 19.3544 32.9123 19.6698 32.9166 20Z"
              fill={pizzas[currentPizzIndex].svgColor || "currentColor"}
            />
          </motion.svg>
        </button>
        <button className="pizzaCarouselButton" onClick={handleNext}>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="40"
            height="40"
            viewBox="0 0 40 40"
            fill="none"
          >
            <path
              d="M20.4167 10.0001C20.4159 10.1643 20.4479 10.327 20.5109 10.4787C20.5739 10.6304 20.6665 10.768 20.7834 10.8834L29.9 20.0001L20.7834 29.1167C20.5626 29.3537 20.4423 29.6671 20.4481 29.9909C20.4538 30.3148 20.585 30.6237 20.814 30.8528C21.043 31.0818 21.352 31.213 21.6758 31.2187C21.9997 31.2244 22.3131 31.1042 22.55 30.8834L32.55 20.8834C32.7841 20.649 32.9156 20.3313 32.9156 20.0001C32.9156 19.6688 32.7841 19.3511 32.55 19.1167L22.55 9.11672C22.3156 8.88263 21.9979 8.75115 21.6667 8.75115C21.3354 8.75115 21.0177 8.88263 20.7834 9.11672C20.6665 9.23212 20.5739 9.36971 20.5109 9.5214C20.4479 9.67308 20.4159 9.83582 20.4167 10.0001Z"
              fill={pizzas[currentPizzIndex].svgColor || "currentColor"}
            />
            <path
              d="M7.08335 20C7.08767 20.3302 7.22075 20.6456 7.45424 20.8791C7.68773 21.1126 8.00317 21.2457 8.33335 21.25L31.6667 21.25C31.9982 21.25 32.3162 21.1183 32.5506 20.8839C32.785 20.6495 32.9167 20.3315 32.9167 20C32.9167 19.6685 32.785 19.3505 32.5506 19.1161C32.3162 18.8817 31.9982 18.75 31.6667 18.75L8.33335 18.75C8.00317 18.7543 7.68773 18.8874 7.45424 19.1209C7.22075 19.3544 7.08767 19.6698 7.08335 20Z"
              fill={pizzas[currentPizzIndex].svgColor || "currentColor"}
            />
          </svg>
        </button>
      </div>
    </div>
  );
}

export default PizzaCarousel;
